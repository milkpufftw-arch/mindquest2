<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Mind Quest - Neon Spectrum</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Import Rounded Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;500;800&family=Orbitron:wght@500;700;900&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <style>
        :root {
            --neon-void: #050511;
            /* Glassmorphism Settings */
            --glass-bg: rgba(30, 35, 50, 0.5);
            --glass-border: rgba(255, 255, 255, 0.1);
            --glass-highlight: rgba(255, 255, 255, 0.05);
            --glass-blur: 24px;
        }

        body {
            font-family: 'M PLUS Rounded 1c', 'Noto Sans TC', sans-serif;
            background-color: var(--neon-void);
            color: #e2e8f0;
            min-height: 100vh;
            overflow-x: hidden;
            overscroll-behavior-y: none;
        }
        
        .font-game { font-family: 'Orbitron', sans-serif; }

        /* Aurora Background - Subtle & Deep */
        .aurora-bg {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1;
            background: 
                radial-gradient(circle at 10% 20%, rgba(59, 130, 246, 0.15) 0%, transparent 40%),
                radial-gradient(circle at 90% 80%, rgba(236, 72, 153, 0.15) 0%, transparent 40%),
                radial-gradient(circle at 50% 50%, rgba(16, 185, 129, 0.1) 0%, transparent 50%);
            filter: blur(80px);
            animation: aurora-move 20s infinite alternate;
        }

        @keyframes aurora-move {
            0% { transform: scale(1); }
            100% { transform: scale(1.1); }
        }

        /* Glassmorphism Panel - Enhanced Texture */
        .glass-panel {
            background: var(--glass-bg);
            backdrop-filter: blur(var(--glass-blur));
            -webkit-backdrop-filter: blur(var(--glass-blur));
            border: 1px solid var(--glass-border);
            border-top: 1px solid var(--glass-highlight); /* Top light source */
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
        }

        /* Custom Vertical Slider */
        .slider-wrapper {
            position: relative;
            height: 50vh;
            max-height: 500px;
            min-height: 350px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .slider-ticks {
            position: absolute;
            right: -20px;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            pointer-events: none;
            padding: 10px 0;
            top: 0;
        }

        .tick {
            width: 6px;
            height: 2px;
            background: rgba(255,255,255,0.3);
            border-radius: 2px;
            box-shadow: 0 0 5px rgba(255,255,255,0.2);
        }

        .slider-container {
            height: 100%;
            position: relative;
            width: 80px;
            border-radius: 60px;
            background: rgba(0, 0, 0, 0.6); 
            box-shadow: inset 0 0 20px rgba(0,0,0,0.9), 0 0 0 1px rgba(255,255,255,0.1);
            display: flex;
            justify-content: center;
            overflow: hidden; 
        }

        .slider-track {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            /* The "Spectrum" Gradient */
            background: linear-gradient(to top, 
                #0f172a 0%,   /* Void */
                #3b82f6 20%,  /* Blue */
                #2dd4bf 40%,  /* Teal */
                #4ade80 60%,  /* Green */
                #facc15 80%,  /* Yellow */
                #f472b6 100%  /* Pink/Magenta */
            );
            border-radius: 0 0 60px 60px;
            box-shadow: 0 0 40px rgba(255, 255, 255, 0.15);
        }
        
        .slider-track::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: rgba(255,255,255,0.95);
            box-shadow: 0 0 20px white, 0 0 8px white;
        }

        /* Rotated Input Strategy */
        #mood-range {
            -webkit-appearance: none;
            appearance: none;
            background: transparent;
            width: 50vh; 
            max-width: 500px;
            min-width: 350px;
            height: 80px; 
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-90deg);
            opacity: 0;
            cursor: pointer;
            z-index: 50; 
            touch-action: none; 
            margin: 0;
        }

        .emoji-display {
            font-size: 5rem;
            filter: drop-shadow(0 0 30px rgba(255,255,255,0.25));
            transition: all 0.3s ease;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        /* Action Cards - Glassmorphism + Neon Pop */
        .action-card {
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            
            /* Glass Texture */
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-top: 1px solid rgba(255, 255, 255, 0.15); /* Top highlight */
            border-radius: 24px;
            
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        
        .action-card:hover {
            background: rgba(255, 255, 255, 0.08);
            transform: translateY(-2px);
        }
        
        .action-card:active { transform: scale(0.96); }
        
        /* Selected State - Dynamic Glow */
        .action-card.selected {
            background: rgba(255, 255, 255, 0.12);
            border-color: rgba(255, 255, 255, 0.6);
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.1), inset 0 0 10px rgba(255,255,255,0.05);
        }
        
        .action-card i {
            transition: all 0.3s ease;
            /* Ensure icons have their own colors initially */
            filter: drop-shadow(0 0 5px rgba(0,0,0,0.5)); 
        }
        
        /* When selected, the ICON glows with its own color */
        .action-card.selected i {
            transform: scale(1.15);
            filter: drop-shadow(0 0 15px currentColor);
        }
        
        /* When selected, text becomes bright white */
        .action-card.selected span {
            color: white;
            text-shadow: 0 0 10px rgba(255,255,255,0.5);
        }

        /* Toggle Switch */
        .toggle-checkbox:checked { right: 0; border-color: #2dd4bf; }
        .toggle-checkbox:checked + .toggle-label { background-color: rgba(45, 212, 191, 0.15); }
        .toggle-checkbox:checked + .toggle-label:before {
            transform: translateX(100%);
            background: #2dd4bf;
            box-shadow: 0 0 15px #2dd4bf;
        }
        
        .toggle-label {
            width: 60px; height: 32px; position: relative; display: block;
            background: #1e293b; border-radius: 32px; cursor: pointer; transition: 0.3s;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .toggle-label:before {
            content: ''; position: absolute; top: 3px; left: 3px;
            width: 24px; height: 24px; background: #94a3b8;
            border-radius: 50%; transition: 0.3s;
        }

        /* Collectible Card */
        .collectible-card {
            background: linear-gradient(135deg, #1e293b, #0f172a);
            border: 1px solid rgba(255,255,255,0.2);
            box-shadow: 0 0 50px rgba(0,0,0,0.7);
            transform-style: preserve-3d;
            animation: card-pop 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }
        @keyframes card-pop {
            0% { transform: scale(0.5) rotateY(90deg); opacity: 0; }
            100% { transform: scale(1) rotateY(0deg); opacity: 1; }
        }

        /* Card Gradients */
        .card-bg-rest { background: linear-gradient(to bottom, #7c3aed, #2e1065); } /* Purple */
        .card-bg-courage { background: linear-gradient(to bottom, #ec4899, #831843); } /* Pink/Red */
        .card-bg-wisdom { background: linear-gradient(to bottom, #3b82f6, #172554); } /* Blue */
        .card-bg-energy { background: linear-gradient(to bottom, #f59e0b, #78350f); } /* Orange/Gold */
        .card-bg-connection { background: linear-gradient(to bottom, #10b981, #064e3b); } /* Emerald Green */

        .screen { display: none; opacity: 0; transition: opacity 0.5s ease; }
        .screen.active { display: flex; opacity: 1; }
        h1, h2, h3, button, .action-card { letter-spacing: 0.05em; }
        
        /* ID Display Hover */
        #user-id-display { cursor: pointer; transition: all 0.2s; }
        #user-id-display:hover { background: rgba(255,255,255,0.1); border-color: rgba(255,255,255,0.3); }
        #user-id-display:active { transform: scale(0.95); }
    </style>
</head>
<body class="flex flex-col items-center justify-center relative p-4">

    <!-- Ambient Background -->
    <div class="aurora-bg"></div>

    <!-- Header -->
    <nav class="absolute top-6 left-0 w-full px-6 flex justify-between items-center z-20">
        <div class="flex items-center space-x-2">
            <i class="ph-fill ph-circles-three-plus text-2xl text-cyan-400 drop-shadow-[0_0_10px_rgba(34,211,238,0.6)]"></i>
            <span class="font-game text-sm tracking-widest text-cyan-100/90 drop-shadow-md">MIND QUEST</span>
        </div>
        <div class="flex items-center gap-2">
            <!-- Test Button -->
            <button onclick="testGoogleSheet()" class="text-[10px] text-yellow-400 border border-yellow-700/50 px-2 py-1 rounded-full bg-black/40 hover:bg-yellow-900/30 transition">
                Ê∏¨Ë©¶ÈÄ£Á∑ö
            </button>
            <!-- ID Display (Clickable) -->
            <div onclick="copyUserId()" class="text-[10px] font-mono text-gray-400 border border-gray-700 px-2 py-1 rounded-full bg-black/40 backdrop-blur-sm shadow-inner flex items-center gap-1 group" id="user-id-display" title="ÈªûÊìäË§áË£ΩÂÆåÊï¥ ID">
                <i class="ph-bold ph-copy text-gray-500 group-hover:text-cyan-400 transition-colors"></i>
                <span id="user-id-text">ÈÄ£Á∑ö‰∏≠...</span>
            </div>
        </div>
    </nav>

    <!-- SCREEN 1: Emotion Input -->
    <main id="screen-1" class="screen active w-full max-w-sm flex-col items-center h-[90vh] justify-center relative z-10">
        
        <div class="text-center mb-6">
            <h1 class="text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-white to-gray-300 mb-1 drop-shadow-md">Âó®Ôºå‰ªäÂ§©ÈÇÑÂ•ΩÂóéÔºü</h1>
            <p class="text-cyan-200/70 text-xs tracking-wide font-light">ÊªëÂãïË™øÊï¥‰Ω†ÁöÑËÉΩÈáèÈ†ªÁéá</p>
        </div>

        <div class="flex flex-col items-center space-y-6 w-full">
            <div id="mood-emoji" class="emoji-display">üò∂</div>
            <!-- Dynamic Color Text -->
            <div id="mood-text" class="h-8 text-xl font-bold text-white tracking-wider drop-shadow-[0_0_15px_rgba(255,255,255,0.4)] transition-colors duration-300">Âπ≥ÈùúÁ©©ÂÆö</div>

            <div class="slider-wrapper">
                <div class="slider-container">
                    <div class="slider-track" id="slider-fill" style="height: 50%;"></div>
                </div>
                <div class="slider-ticks">
                    <div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div><div class="tick"></div>
                </div>
                <input type="range" min="0" max="100" value="50" id="mood-range" oninput="updateMoodUI(this.value)">
            </div>
        </div>

        <button onclick="goToScreen(2)" class="mt-8 w-full max-w-xs py-4 rounded-2xl bg-white/10 border border-white/20 text-white font-bold hover:bg-white/20 hover:border-white/40 hover:shadow-[0_0_20px_rgba(255,255,255,0.2)] transition-all backdrop-blur-md flex items-center justify-center space-x-2 shadow-lg group">
            <span>‰∏ã‰∏ÄÊ≠•</span>
            <i class="ph-bold ph-caret-right group-hover:translate-x-1 transition-transform"></i>
        </button>
    </main>

    <!-- SCREEN 2: Action & Privacy -->
    <main id="screen-2" class="screen w-full max-w-sm flex-col items-center h-[90vh] justify-center relative z-10">
        
        <h2 class="text-lg font-bold text-white/90 mb-6 w-full text-left pl-2 flex items-center drop-shadow-md">
            <i class="ph-duotone ph-activity mr-2 text-purple-400"></i> ÂâõÂâõÁöÑÁãÄÊÖã
        </h2>
        
        <!-- Action Grid: FULL COLORS RESTORED -->
        <div class="grid grid-cols-3 gap-3 w-full mb-8">
            <div class="action-card" onclick="toggleAction(this, 'music')">
                <i class="ph-fill ph-headphones text-3xl text-pink-400 mb-2"></i>
                <span class="text-xs font-bold text-gray-400 mt-1 transition-colors">ËÅΩÈü≥Ê®Ç</span>
            </div>
            <div class="action-card" onclick="toggleAction(this, 'sleep')">
                <i class="ph-fill ph-moon-stars text-3xl text-indigo-400 mb-2"></i>
                <span class="text-xs font-bold text-gray-400 mt-1 transition-colors">Ë£úÁú†</span>
            </div>
            <div class="action-card" onclick="toggleAction(this, 'game')">
                <i class="ph-fill ph-game-controller text-3xl text-purple-400 mb-2"></i>
                <span class="text-xs font-bold text-gray-400 mt-1 transition-colors">ÈÅäÊà≤</span>
            </div>
            <div class="action-card" onclick="toggleAction(this, 'eat')">
                <i class="ph-fill ph-bowl-food text-3xl text-orange-400 mb-2"></i>
                <span class="text-xs font-bold text-gray-400 mt-1 transition-colors">ÂêÉÂ•ΩÊñô</span>
            </div>
            <div class="action-card" onclick="toggleAction(this, 'write')">
                <i class="ph-fill ph-pencil-simple text-3xl text-blue-400 mb-2"></i>
                <span class="text-xs font-bold text-gray-400 mt-1 transition-colors">Êõ∏ÂØ´</span>
            </div>
            <div class="action-card" onclick="toggleAction(this, 'zoneout')">
                <i class="ph-fill ph-wind text-3xl text-teal-400 mb-2"></i>
                <span class="text-xs font-bold text-gray-400 mt-1 transition-colors">ÊîæÁ©∫</span>
            </div>
            <div class="action-card" onclick="toggleAction(this, 'exercise')">
                <i class="ph-fill ph-person-simple-run text-3xl text-red-400 mb-2"></i>
                <span class="text-xs font-bold text-gray-400 mt-1 transition-colors">ÈÅãÂãï</span>
            </div>
            <div class="action-card" onclick="toggleAction(this, 'chat')">
                <i class="ph-fill ph-chat-circle-dots text-3xl text-green-400 mb-2"></i>
                <span class="text-xs font-bold text-gray-400 mt-1 transition-colors">ËÅäÂ§©</span>
            </div>
            <div class="action-card" onclick="toggleAction(this, 'read')">
                <i class="ph-fill ph-book-open text-3xl text-yellow-400 mb-2"></i>
                <span class="text-xs font-bold text-gray-400 mt-1 transition-colors">Èñ±ËÆÄ</span>
            </div>
        </div>

        <!-- Privacy Toggle -->
        <div class="glass-panel w-full p-4 rounded-2xl mb-8 flex items-center justify-between">
            <div class="flex flex-col">
                <span id="privacy-status-text" class="text-sm font-bold text-gray-300 flex items-center">
                    <i class="ph-fill ph-lock-key mr-2 text-gray-400"></i> ÈéñÂÖ•Ê®πÊ¥û
                </span>
                <span class="text-[10px] text-gray-500 mt-1 font-mono tracking-wide">
                    ENCRYPTED: PRIVATE
                </span>
            </div>
            
            <div class="relative">
                <input type="checkbox" id="privacy-toggle" class="sr-only toggle-checkbox" onchange="updatePrivacyUI()">
                <label for="privacy-toggle" class="toggle-label"></label>
            </div>
        </div>

        <div class="flex space-x-3 w-full">
            <button onclick="goToScreen(1)" class="flex-1 py-4 rounded-2xl bg-gray-800/60 border border-gray-700 text-gray-400 font-bold text-sm hover:text-white hover:bg-gray-700/60 transition">
                ËøîÂõû
            </button>
            <button id="submit-btn" onclick="submitEntry()" class="flex-[2] py-4 rounded-2xl bg-gradient-to-r from-blue-600 to-purple-600 text-white font-bold shadow-[0_0_25px_rgba(124,58,237,0.3)] hover:shadow-[0_0_35px_rgba(124,58,237,0.5)] transition-all flex items-center justify-center space-x-2 border border-white/10">
                <span>Â≠òÊ™î (SAVE)</span>
            </button>
        </div>
    </main>

    <!-- SCREEN 3: Feedback Reward -->
    <main id="screen-3" class="screen w-full max-w-sm flex-col items-center h-[90vh] justify-center relative z-10">
        
        <!-- Collectible Card -->
        <div id="final-card" class="collectible-card w-64 h-96 rounded-2xl relative overflow-hidden flex flex-col p-2 group border border-white/20">
            <div class="absolute inset-0 bg-gradient-to-br from-white/10 to-transparent opacity-40 z-20 pointer-events-none"></div>
            
            <!-- Image Area -->
            <div id="card-art-bg" class="w-full h-3/5 rounded-xl mb-4 relative overflow-hidden flex items-center justify-center transition-colors duration-500">
                <div class="absolute inset-0 bg-black/20 backdrop-blur-[1px]"></div>
                <!-- Animated Icon -->
                <i id="card-icon" class="ph-duotone ph-coffee text-6xl text-white/95 z-10 drop-shadow-[0_0_20px_rgba(255,255,255,0.6)] transition-all duration-300"></i>
                <div id="card-type-badge" class="absolute bottom-2 right-2 text-[9px] text-white/90 font-game border border-white/30 px-1.5 py-0.5 rounded bg-black/60 backdrop-blur-md tracking-wider">SSR</div>
            </div>

            <!-- Content -->
            <div class="flex-1 flex flex-col items-center text-center p-2 z-10">
                <div id="card-subtitle" class="text-[9px] text-white/60 tracking-[0.2em] mb-2 font-bold uppercase border-b border-white/10 pb-1 w-1/2">ENERGY CARD</div>
                <h3 id="card-title" class="text-white font-bold text-lg leading-tight mb-2 tracking-wide drop-shadow-md">ÂÖÅË®±Êö´ÂÅú</h3>
                <p id="reward-quote" class="text-xs text-gray-300 leading-relaxed font-light px-2">
                    "Âç≥‰ΩøÊòØË∂ÖÁ¥öËã±ÈõÑÔºå‰πüÊúâÈúÄË¶ÅÂÖÖÈõªÁöÑÊôÇÂÄô„ÄÇ"
                </p>
            </div>
            
            <!-- Bottom Data -->
            <div class="w-full border-t border-white/10 pt-2 flex justify-between text-[8px] text-gray-500 font-mono z-10">
                <span id="card-id">NO. 0824</span>
                <span>MQ-SYSTEM-V2</span>
            </div>
        </div>

        <button onclick="resetApp()" class="mt-10 px-8 py-3 rounded-full border border-white/20 text-gray-300 hover:text-white hover:bg-white/10 hover:border-white/40 transition text-xs tracking-[0.2em] font-game shadow-[0_0_15px_rgba(255,255,255,0.1)]">
            <i class="ph-bold ph-download-simple mr-2"></i>COLLECT
        </button>

    </main>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // ======================================================
        // „ÄêË®≠ÂÆöÂçÄ„ÄëGoogle Apps Script URL (Â∑≤Êï¥Âêà)
        const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxTVQx7rgAQuagLPcu7lzAO2x3wkxeqZ6K0TPDSIQMm6puyRzYxf3NtiwcFeQxW-fM5/exec"; 
        // ======================================================

        const firebaseConfig = {
            apiKey: "AIzaSyB5MI27oqpqrrvck50uMzh49bbj7Onyq1U",
            authDomain: "mind-quest-sel.firebaseapp.com",
            projectId: "mind-quest-sel",
            storageBucket: "mind-quest-sel.firebasestorage.app",
            messagingSenderId: "418491447578",
            appId: "1:418491447578:web:ed0fc6248555b789a6d4e3"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);
        
        let userId = null;
        let currentMoodValue = 50; 
        let selectedActions = [];
        let isPublic = false; 
        let isOfflineMode = false;

        // 45 Cards Database
        const CARD_DATABASE = [
            // REST (Purple)
            { id: '001', type: 'rest', title: 'Êö´ÂÅú‰∏Ä‰∏ã', quote: 'ÂÖÅË®±Ëá™Â∑±Êö´ÂÅúÔºåÈÄô‰∏çÊòØÊîæÊ£ÑÔºåËÄåÊòØÊà∞Ë°ìÊÄßÊí§ÈÄÄ„ÄÇ', icon: 'ph-pause-circle' },
            { id: '002', type: 'rest', title: '‰ΩéËÄóÈõªÊ®°Âºè', quote: '‰Ω†‰∏çÈúÄË¶ÅÁ∏ΩÊòØÂÖ®ÈÄüÈÅãËΩâÔºåÂæÖÊ©ü‰πüÊòØ‰∏ÄÁ®ÆÁãÄÊÖã„ÄÇ', icon: 'ph-battery-low' },
            { id: '003', type: 'rest', title: 'ÂÆâÂÖ®Â†°Â£ò', quote: 'ÊÉ≥ÂÉè‰∏ÄÂÄãËÆì‰Ω†ÊÑüÂà∞ÁµïÂ∞çÂÆâÂÖ®ÁöÑÂú∞ÊñπÔºåÂú®ÂøÉË£°Ë∫≤ÈÄ≤Âéª‰∏ÄÂàÜÈêò„ÄÇ', icon: 'ph-shield-check' },
            { id: '004', type: 'rest', title: 'Èõ≤Á´ØÊº´Ê≠•', quote: 'ÊÉÖÁ∑íÂ∞±ÂÉèÂ§©Á©∫ÁöÑÈõ≤ÔºåËÆìÂÆÉÈ£ÑÈÅéÔºå‰∏çÈúÄË¶ÅÊäì‰ΩèÂÆÉ„ÄÇ', icon: 'ph-cloud' },
            { id: '005', type: 'rest', title: 'Á≥ªÁµ±ÈáçÊï¥', quote: '‰ªäÂ§©ÁöÑÊ∑∑‰∫ÇÂè™ÊòØÁ≥ªÁµ±Âú®ÈáçÁµÑÔºåÁù°‰∏ÄË¶∫ÊúÉÊõ¥Â•ΩÁöÑ„ÄÇ', icon: 'ph-arrows-clockwise' },
            { id: '006', type: 'rest', title: 'Ê∑±ÂëºÂê∏', quote: 'Âê∏Ê∞£Êï∏Âà∞ÂõõÔºåÊÜãÊ∞£Êï∏Âà∞ÂõõÔºåÂêêÊ∞£Êï∏Âà∞Âõõ„ÄÇ', icon: 'ph-wind' },
            { id: '007', type: 'rest', title: 'Èõ¢Á∑öÊ®°Âºè', quote: 'Êö´ÊôÇÂàáÊñ∑Ë®äËôüÔºåÊòØÁÇ∫‰∫Ü‰øùË≠∑Ê†∏ÂøÉËôïÁêÜÂô®„ÄÇ', icon: 'ph-wifi-slash' },
            { id: '008', type: 'rest', title: 'ÈÄ£ÁµêËá™ÁÑ∂', quote: 'ËÅΩËÅΩÈõ®ËÅ≤ÊàñË∏©Ë∏©ËçâÂú∞ÔºåËÆìÂ§ßËá™ÁÑ∂Âπ´‰Ω†ÂÖÖÈõª„ÄÇ', icon: 'ph-tree' },
            { id: '009', type: 'rest', title: 'ÈùúÈü≥‰∏ñÁïå', quote: '‰∏ñÁïåÂ§™Âêµ‰∫ÜÔºå‰Ω†ÊúâÊ¨äÂà©ÊääÈü≥ÈáèË™øÂà∞ÈùúÈü≥„ÄÇ', icon: 'ph-speaker-slash' },
            
            // COURAGE (Pink/Red)
            { id: '010', type: 'courage', title: 'Êé•Á¥çÊÉÖÁ∑í', quote: 'Ê≤íÊúâ„ÄåÂ£û„ÄçÊÉÖÁ∑íÔºåÂè™Êúâ„ÄåÂÇ≥ÈÅûË®äÊÅØ„ÄçÁöÑÊÉÖÁ∑í„ÄÇ', icon: 'ph-heart-break' },
            { id: '011', type: 'courage', title: 'ÊìÅÊä±Èô∞ÂΩ±', quote: 'Âç≥‰ΩøÂú®ÊúÄÈªëÊöóÁöÑÈóúÂç°Ôºå‰Ω†‰æùÁÑ∂ÊòØ‰∏ªËßí„ÄÇ', icon: 'ph-moon' },
            { id: '012', type: 'courage', title: '‰∏çÂÆåÁæé', quote: '‰Ω†‰∏çÂøÖÂÆåÁæéÔºå‰Ω†Âè™ÈúÄË¶Å„ÄåÂú®„ÄçÈÄôË£°„ÄÇ', icon: 'ph-sparkle' },
            { id: '013', type: 'courage', title: 'Ëá™ÊàëÊÖàÊÇ≤', quote: 'ÂÉèÂ∞çÂæÖÊúÄÂ•ΩÁöÑÊúãÂèã‰∏ÄÊ®£Â∞çÂæÖËá™Â∑±„ÄÇ', icon: 'ph-hand-heart' },
            { id: '014', type: 'courage', title: 'ÂÖÅË®±Âì≠Ê≥£', quote: 'ÁúºÊ∑öÊòØÂøÉÈùàÁöÑÂÜ∑ÂçªÂäëÔºåËÆìÁ≥ªÁµ±‰∏çÈÅéÁÜ±„ÄÇ', icon: 'ph-drop' },
            { id: '015', type: 'courage', title: 'ÊãíÁµïÂäõ', quote: 'Ë™™„Äå‰∏ç„ÄçÊòØ‰øùË≠∑Ëá™Â∑±ÁöÑÈò≤ÁÅ´ÁâÜÔºå‰Ω†ÊúâÊ¨äÂà©ÈñãÂïüÂÆÉ„ÄÇ', icon: 'ph-hand-palm' },
            { id: '016', type: 'courage', title: 'Âç∏‰∏ãÁõîÁî≤', quote: 'Á§∫Âº±‰∏çÊòØËº∏‰∫ÜÔºåËÄåÊòØÂç∏‰∏ãÊ≤âÈáçÁöÑË£ùÂÇô‰ºëÊÅØ„ÄÇ', icon: 'ph-shield-slash' },
            { id: '017', type: 'courage', title: 'ÊÜ§ÊÄí‰ø°Ëôü', quote: 'ÊÜ§ÊÄíÊòØ‰øùÂÖ®Á≥ªÁµ±ÁöÑË≠¶Â†±ÔºåÂÆÉÂú®ÊèêÈÜí‰Ω†ÈÇäÁïåË¢´‰æµÁäØ‰∫Ü„ÄÇ', icon: 'ph-fire' },
            { id: '018', type: 'courage', title: 'Ëá™ÊàëÂØ¨ÊÅï', quote: 'ÂéüË´íÊò®Â§©ÁöÑËá™Â∑±ÔºåÁï∂ÊôÇÁöÑ‰Ω†Â∑≤Á∂ìÁõ°Âäõ‰∫Ü„ÄÇ', icon: 'ph-bandaids' },

            // WISDOM (Cyan/Blue)
            { id: '019', type: 'wisdom', title: 'ËßÄÂØüËÄÖ', quote: 'Ë©¶ËëóË∑≥Âá∫‰æÜÔºåÂÉèÁúãÈõªÂΩ±‰∏ÄÊ®£ÁúãËëóËá™Â∑±ÁöÑÁÖ©ÊÉ±„ÄÇ', icon: 'ph-eye' },
            { id: '020', type: 'wisdom', title: 'Èùû‰∫åÂÖÉ', quote: '‰∫ãÊÉÖ‰∏çÂè™ÊúâÂ•ΩËàáÂ£ûÔºåÈÇÑÊúâ‰∏≠ÈñìÁöÑÁÅ∞Ëâ≤Âú∞Â∏∂„ÄÇ', icon: 'ph-scales' },
            { id: '021', type: 'wisdom', title: 'ÊôÇÈñìÈ≠îÊ≥ï', quote: 'ÈÄôÂÄãÁÖ©ÊÉ±Âú®‰∏ÄÂπ¥ÂæåÈÇÑÊúÉÈÄôÈ∫ºÂ∑®Â§ßÂóéÔºü', icon: 'ph-hourglass' },
            { id: '022', type: 'wisdom', title: 'ÊéåÊéßÊÑü', quote: 'Â∞àÊ≥®Âú®‰Ω†ÁèæÂú®ËÉΩÊéßÂà∂ÁöÑÂ∞è‰∫ã‰∏äÔºå‰æãÂ¶ÇÂñùÊùØÊ∞¥„ÄÇ', icon: 'ph-game-controller' },
            { id: '023', type: 'wisdom', title: 'ÂÖßÂú®Â∞èÂ≠©', quote: '‰Ω†ÂøÉË£°ÈÇ£ÂÄãÂèóÂÇ∑ÁöÑÂ∞èÂ≠©Ôºå‰ªäÂ§©ÈúÄË¶Å‰ªÄÈ∫ºÔºü', icon: 'ph-baby' },
            { id: '024', type: 'wisdom', title: 'ÊàêÈï∑ÊÄùÁ∂≠', quote: 'ÈÄô‰∏çÊòØÂ§±ÊïóÔºåÈÄôÊòØÁç≤ÂèñÁ∂ìÈ©óÂÄº(XP)ÁöÑÈÅéÁ®ã„ÄÇ', icon: 'ph-plant' },
            { id: '025', type: 'wisdom', title: 'ÊèõÂÄãÊøæÈè°', quote: 'ÊèõÂÄãÈè°È†≠ÁúãÈÄô‰ª∂‰∫ãÔºå‰πüË®±ÊúÉÁôºÁèæ‰∏çÂêåÁöÑÂäáÊÉÖ„ÄÇ', icon: 'ph-camera' },
            { id: '026', type: 'wisdom', title: 'ÊµÅÂãïÁÑ°Â∏∏', quote: 'Âø´Ê®ÇÊúÉÈÅéÂéªÔºåÁóõËã¶‰πüÊúÉÈÅéÂéªÔºå‰∏ÄÂàáÈÉΩÂú®ÊµÅÂãï„ÄÇ', icon: 'ph-waves' },
            { id: '027', type: 'wisdom', title: 'Ê†∏ÂøÉÂÉπÂÄº', quote: '‰ªÄÈ∫ºÂ∞ç‰Ω†ÊúÄÈáçË¶ÅÔºüÈÇ£Â∞±ÊòØ‰Ω†ÁöÑÂ∞éËà™Êòü„ÄÇ', icon: 'ph-diamond' },

            // ENERGY (Orange/Yellow) - RESTORED
            { id: '028', type: 'energy', title: 'ÂæÆÂ∞èÂãùÂà©', quote: '‰ªäÂ§©ÊúâËµ∑Â∫äÂà∑ÁâôÂóéÔºüÈÄôÂ∞±ÊòØ‰∏ÄÂÄãÂãùÂà©„ÄÇ', icon: 'ph-trophy' },
            { id: '029', type: 'energy', title: 'ÂâµÈÄ†Âäõ', quote: 'ÊääÁóõËã¶ËΩâÂåñÁÇ∫ÊñáÂ≠ó„ÄÅÂúñÁï´ÊàñËÅ≤Èü≥„ÄÇ', icon: 'ph-paint-brush' },
            { id: '030', type: 'energy', title: 'Ë∫´È´îÊéÉÊèè', quote: 'ËÇ©ËÜÄÊîæÈ¨ÜÔºå‰∏ãÂ∑¥ÊîæÈ¨ÜÔºåÁúâÈ†≠ÊîæÈ¨Ü„ÄÇ', icon: 'ph-person-simple' },
            { id: '031', type: 'energy', title: 'ÈôΩÂÖâ', quote: '‰Ω†ÊòØÂÖâÂêà‰ΩúÁî®ÁöÑÁîüÁâ©ÔºåÂéªÊõ¨ÈªûÂ§™ÈôΩÂêß„ÄÇ', icon: 'ph-sun' },
            { id: '032', type: 'energy', title: 'Êé¢Á¥¢', quote: '‰øùÊåÅÂ•ΩÂ•áÂøÉÔºå‰∏ñÁïåÈÇÑÊúâÂæàÂ§öÈö±ËóèÂú∞ÂúñÁ≠â‰Ω†Èñã„ÄÇ', icon: 'ph-compass' },
            { id: '033', type: 'energy', title: 'Èü≥Ê®Ç', quote: 'Êà¥‰∏äËÄ≥Ê©üÔºåÈÄô‰∏ñÁïåÂ∞±ÊòØ‰Ω†ÁöÑMV„ÄÇ', icon: 'ph-music-notes' },
            { id: '034', type: 'energy', title: 'Ê∞¥ÂàÜË£úÁµ¶', quote: 'Â§ßËÖ¶Êúâ75%ÊòØÊ∞¥ÔºåÂñùÊùØÊ∞¥Âπ´ÂÆÉÊï£ÁÜ±„ÄÇ', icon: 'ph-drop-half-bottom' },
            { id: '035', type: 'energy', title: 'ÂãïÂãïË∫´È´î', quote: 'Á´ôËµ∑‰æÜÁî©Áî©ÊâãÔºåÊääÂç°‰ΩèÁöÑÂ£ìÂäõÁî©Âá∫Âéª„ÄÇ', icon: 'ph-person-simple-walk' },
            { id: '036', type: 'energy', title: 'Ê∏ÖÁêÜÁí∞Â¢É', quote: 'Ê∏ÖÁêÜÊ°å‰∏äÁöÑ‰∏ÄÂÄãËßíËêΩÔºå‰πüËÉΩÊ∏ÖÁêÜÂøÉË£°ÁöÑ‰∏ÄÂÄãËßíËêΩ„ÄÇ', icon: 'ph-broom' },

            // CONNECTION (Emerald/Teal)
            { id: '037', type: 'connection', title: 'Ê±ÇÂä©', quote: 'ÂêëÈöäÂèãÁôºÂá∫Ê±ÇÊïëË®äËôü(Ping)ÊòØÊô∫ÊÖßÔºå‰∏çÊòØËªüÂº±„ÄÇ', icon: 'ph-users' },
            { id: '038', type: 'connection', title: 'ÁïåÁ∑ö', quote: '‰Ω†ÁöÑËÉΩÈáèÊòØÊúâÈôêÁöÑË≥áÊ∫êÔºå‰∏çË¶ÅËÆìÂà•‰∫∫Èö®ÊÑèÈñãÊé°„ÄÇ', icon: 'ph-wall' },
            { id: '039', type: 'connection', title: 'ÂÖ±ÊÑü', quote: '‰Ω†‰∏çÂ≠§ÂñÆÔºåÈÄôÂÄã‰º∫ÊúçÂô®Ë£°ÈÇÑÊúâÂæàÂ§ö‰∫∫Ë∑ü‰Ω†‰∏ÄÊ®£„ÄÇ', icon: 'ph-wifi-high' },
            { id: '040', type: 'connection', title: 'ÂñÑÊÑè', quote: 'Â∞çË∑ØÈÇäÁöÑË≤ìÂí™ÊàñÂ∞èËä±ÈáãÊîæ‰∏ÄÈªûÂñÑÊÑè„ÄÇ', icon: 'ph-cat' },
            { id: '041', type: 'connection', title: 'Ë°®ÈÅî', quote: 'Ë©¶ËëóÊääÊÑüË¶∫ÂØ´‰∏ã‰æÜÊàñË™™Âá∫‰æÜÔºåËÆìÂÆÉÂØ¶È´îÂåñ„ÄÇ', icon: 'ph-chat-teardrop-text' },
            { id: '042', type: 'connection', title: 'ÊÑüË¨ù', quote: 'ÊÑüË¨ù‰ªäÂ§©ÁöÑËá™Â∑±ÔºåÈÄôÂ†¥‰ªó‰Ω†ÊíêÈÅé‰æÜ‰∫Ü„ÄÇ', icon: 'ph-gift' },
            { id: '043', type: 'connection', title: 'ÂÇæËÅΩ', quote: 'Â∞àÊ≥®Âú∞ËÅΩÂà•‰∫∫Ë™™Ë©±ÔºåÊòØ‰Ω†ËÉΩÁµ¶‰∫àÊúÄÁèçË≤¥ÁöÑÁ¶ÆÁâ©„ÄÇ', icon: 'ph-ear' },
            { id: '044', type: 'connection', title: 'ÂãïÁâ©ÁôÇÁôí', quote: 'ÂãïÁâ©‰∏çÊáÇË™ûË®ÄÔºå‰ΩÜÂÆÉÂÄëÊáÇ‰Ω†ÁöÑÂøÉ„ÄÇ', icon: 'ph-paw-print' },
            { id: '045', type: 'connection', title: 'Â∞ãÊâæÈ†ªÁéá', quote: 'Âú®‰∫∫Áæ§‰∏≠Â∞ãÊâæ‰Ω†ÁöÑÈ†ªÁéáÔºåÁ∏ΩÊúâ‰∫∫ËÅΩÂæóÊáÇ‰Ω†ÁöÑÊ≠å„ÄÇ', icon: 'ph-alien' }
        ];

        signInAnonymously(auth).catch((error) => {
            isOfflineMode = true;
            document.getElementById('user-id-text').textContent = `OFFLINE`;
            document.getElementById('user-id-display').classList.add('text-orange-400', 'border-orange-500');
        });

        onAuthStateChanged(auth, (user) => {
            if (user) {
                userId = user.uid;
                isOfflineMode = false;
                document.getElementById('user-id-text').textContent = `ID: ${user.uid.slice(0,6)}`;
                document.getElementById('user-id-display').classList.add('text-cyan-400');
                
                // Expose for copy function
                window.currentUserFullId = user.uid;
            }
        });

        // Copy ID Function
        window.copyUserId = function() {
            if (window.currentUserFullId) {
                navigator.clipboard.writeText(window.currentUserFullId).then(() => {
                    const originalText = document.getElementById('user-id-text').textContent;
                    document.getElementById('user-id-text').textContent = "COPIED!";
                    document.getElementById('user-id-display').classList.add('bg-green-500/20', 'border-green-500');
                    setTimeout(() => {
                        document.getElementById('user-id-text').textContent = originalText;
                        document.getElementById('user-id-display').classList.remove('bg-green-500/20', 'border-green-500');
                    }, 2000);
                });
            }
        };

        // Function exposed to global scope for the Test Button
        window.testGoogleSheet = function() {
            if (!GOOGLE_SCRIPT_URL) {
                alert("‚ùå Ë´ãÂÖàÂ°´ÂÖ• GOOGLE_SCRIPT_URLÔºÅ");
                return;
            }
            alert("üöÄ Ê≠£Âú®ÁôºÈÄÅÊ∏¨Ë©¶Ë≥áÊñô...");
            fetch(GOOGLE_SCRIPT_URL, {
                method: 'POST',
                mode: 'no-cors',
                headers: { 'Content-Type': 'text/plain' },
                body: JSON.stringify({
                    userId: 'TEST-USER',
                    moodValue: 99,
                    moodLabel: 'Ê∏¨Ë©¶ÈÄ£Á∑ö',
                    activities: ['Test'],
                    visibility: 'test'
                })
            })
            .then(() => alert("‚úÖ Ë´ãÊ±ÇÂ∑≤ÁôºÈÄÅÔºÅ\nË´ãÊ™¢Êü•ÊÇ®ÁöÑ Google Ë©¶ÁÆóË°®ÊòØÂê¶ÊúâÊñ∞Â¢û‰∏ÄË°åË≥áÊñô„ÄÇ\n\nÂ¶ÇÊûúÊ≤íÊúâÔºö\n1. Ê™¢Êü• Apps Script ÊòØÂê¶ÈÉ®ÁΩ≤ÁÇ∫„Äå‰ªª‰Ωï‰∫∫„Äç\n2. Ê™¢Êü•Á∂≤ÂùÄÊòØÂê¶Ê≠£Á¢∫"))
            .catch(err => alert("‚ùå ÁôºÈÄÅÂ§±ÊïóÔºö" + err));
        }

        window.goToScreen = (num) => {
            document.querySelectorAll('.screen').forEach(el => {
                el.classList.remove('active');
                setTimeout(() => {
                    if(!el.classList.contains('active')) el.style.display = 'none';
                }, 500); 
            });
            const target = document.getElementById(`screen-${num}`);
            target.style.display = 'flex';
            setTimeout(() => target.classList.add('active'), 50);
        }

        window.updateMoodUI = (val) => {
            // Magnetic snap
            if (val < 3) val = 0;
            if (val > 97) val = 100;

            currentMoodValue = val;
            const fill = document.getElementById('slider-fill');
            const emoji = document.getElementById('mood-emoji');
            const text = document.getElementById('mood-text');
            
            fill.style.height = `${val}%`;
            
            // Restored Colorful Spectrum (with Neon styling)
            // Void -> Dark Blue -> Indigo -> Teal -> Green -> Yellow -> Pink
            if (val < 15) {
                emoji.textContent = "ü™´";
                text.textContent = "ËÉΩÈáèËÄóÁõ°"; 
                text.style.color = "#94a3b8"; // Slate-400
                fill.style.background = "linear-gradient(to top, #0f172a, #1e293b)";
            } else if (val < 30) {
                emoji.textContent = "üåßÔ∏è";
                text.textContent = "ÊÑüÂà∞Áñ≤ÊÜä"; 
                text.style.color = "#3b82f6"; // Blue-500
                fill.style.background = "linear-gradient(to top, #1e293b, #3b82f6)";
            } else if (val < 45) {
                emoji.textContent = "‚òÅÔ∏è";
                text.textContent = "ÂøÉÊÉÖ‰ΩéËêΩ"; 
                text.style.color = "#2dd4bf"; // Teal-400
                fill.style.background = "linear-gradient(to top, #3b82f6, #2dd4bf)";
            } else if (val < 55) {
                emoji.textContent = "üò∂";
                text.textContent = "Âπ≥ÈùúÁ©©ÂÆö"; 
                text.style.color = "#4ade80"; // Green-400
                fill.style.background = "linear-gradient(to top, #2dd4bf, #4ade80)";
            } else if (val < 70) {
                emoji.textContent = "üôÇ";
                text.textContent = "ÊÑüË¶∫‰∏çÈåØ"; 
                text.style.color = "#a3e635"; // Lime-400
                fill.style.background = "linear-gradient(to top, #4ade80, #a3e635)";
            } else if (val < 85) {
                emoji.textContent = "‚ö°";
                text.textContent = "ÂÖÖÊªøÊ¥ªÂäõ"; 
                text.style.color = "#facc15"; // Yellow-400
                fill.style.background = "linear-gradient(to top, #a3e635, #facc15)";
            } else {
                emoji.textContent = "üî•";
                text.textContent = "ÁãÄÊÖãÁµï‰Ω≥"; 
                text.style.color = "#f472b6"; // Pink-400
                fill.style.background = "linear-gradient(to top, #facc15, #f472b6)";
            }
        };

        window.toggleAction = (el, actionId) => {
            el.classList.toggle('selected');
            if (selectedActions.includes(actionId)) {
                selectedActions = selectedActions.filter(id => id !== actionId);
            } else {
                selectedActions.push(actionId);
            }
        };

        window.updatePrivacyUI = () => {
            const checkbox = document.getElementById('privacy-toggle');
            const statusText = document.getElementById('privacy-status-text');
            const subText = statusText.nextElementSibling;
            isPublic = checkbox.checked;
            
            if (isPublic) {
                statusText.innerHTML = `<i class="ph-fill ph-paper-plane-right mr-2 text-green-400"></i> <span class="text-green-400">ÁôºÈÄÅÁµ¶Á§æÂ∑•</span>`;
                subText.textContent = "SHARED: PUBLIC";
                subText.className = "text-[10px] text-green-600 mt-1 font-mono";
            } else {
                statusText.innerHTML = `<i class="ph-fill ph-lock-key mr-2 text-gray-400"></i> ÈéñÂÖ•Ê®πÊ¥û`;
                subText.textContent = "ENCRYPTED: PRIVATE";
                subText.className = "text-[10px] text-gray-600 mt-1 font-mono";
            }
        };

        window.submitEntry = async () => {
            if (!userId && !isOfflineMode) return alert("ÈÄ£Á∑ö‰∏≠...");
            const btn = document.getElementById('submit-btn');
            btn.innerHTML = `<i class="ph-bold ph-spinner animate-spin"></i> SAVING...`;
            
            try {
                let moodLevel = 4;
                if(currentMoodValue < 15) moodLevel = 1;
                else if(currentMoodValue < 30) moodLevel = 2;
                else if(currentMoodValue < 45) moodLevel = 3;
                else if(currentMoodValue < 55) moodLevel = 4;
                else if(currentMoodValue < 70) moodLevel = 5;
                else if(currentMoodValue < 85) moodLevel = 6;
                else moodLevel = 7;

                // Sync to Google Sheet if URL is present
                if (GOOGLE_SCRIPT_URL) {
                    fetch(GOOGLE_SCRIPT_URL, {
                        method: 'POST',
                        mode: 'no-cors',
                        headers: { 'Content-Type': 'text/plain' },
                        body: JSON.stringify({
                            userId: userId,
                            moodValue: moodLevel,
                            moodLabel: document.getElementById('mood-text').textContent,
                            activities: selectedActions,
                            visibility: isPublic ? 'shared' : 'private'
                        })
                    }).catch(err => console.error("Sheet sync error:", err));
                }

                if (!isOfflineMode && userId) {
                    await addDoc(collection(db, 'mood_entries'), {
                        userId: userId,
                        timestamp: serverTimestamp(),
                        moodValue: moodLevel, 
                        moodRaw: currentMoodValue, 
                        moodLabel: document.getElementById('mood-text').textContent,
                        activities: selectedActions,
                        visibility: isPublic ? 'shared' : 'private',
                        platform: 'MindQuest_Cyberpunk'
                    });
                } else {
                    await new Promise(r => setTimeout(r, 1000));
                }

                const card = CARD_DATABASE[Math.floor(Math.random() * CARD_DATABASE.length)];
                document.getElementById('card-title').textContent = card.title;
                document.getElementById('reward-quote').textContent = `"${card.quote}"`;
                document.getElementById('card-subtitle').textContent = `${card.type} TYPE`;
                document.getElementById('card-id').textContent = `NO. ${card.id}`;
                document.getElementById('card-icon').className = `ph-duotone ${card.icon} text-6xl text-white/90 z-10 drop-shadow-lg transition-all duration-300`;
                const artBg = document.getElementById('card-art-bg');
                artBg.className = `w-full h-3/5 rounded-xl mb-4 relative overflow-hidden flex items-center justify-center transition-colors duration-500 card-bg-${card.type}`;

                goToScreen(3);
                triggerConfetti();

            } catch (e) {
                console.error(e);
                alert("Error Saving");
            } finally {
                btn.innerHTML = `<span>Â≠òÊ™î (SAVE)</span>`;
            }
        };

        window.triggerConfetti = () => {
            const colors = ['#f472b6', '#4ade80', '#2dd4bf', '#facc15'];
            confetti({
                particleCount: 100,
                spread: 100,
                origin: { y: 0.6 },
                colors: colors,
                disableForReducedMotion: true
            });
        };

        window.resetApp = () => {
            currentMoodValue = 50;
            selectedActions = [];
            isPublic = false;
            document.querySelectorAll('.action-card').forEach(c => c.classList.remove('selected'));
            document.getElementById('privacy-toggle').checked = false;
            updatePrivacyUI();
            updateMoodUI(50);
            goToScreen(1);
        };

        updateMoodUI(50);
    </script>
</body>
</html>